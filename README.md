# ğŸ›ï¸ rob.numbox

A JSUI replacement for `live.numbox` in Max/MSP that avoids the "overwrite look" of js painter files and adds additional functionality.

**Status:** Work in progress

## ğŸ“‹ What it does

**rob.numbox** replaces Max's `live.numbox` with a JSUI implementation that provides similar functionality but allows for further customization.

## âœ¨ Features

- ğŸ–±ï¸ **Full live.numbox compatibility** - Mouse interaction, keyboard editing, double-click reset
- âŒ¨ï¸ **Keyboard editing mode** - Type numbers directly with flashing red cursor
- ğŸ¨ **Dynamic Live theme support** - Automatic color adaptation with active/inactive states  
- ğŸ“ **Text justification** - Left, center, right alignment via jsarguments
- ğŸ”¢ **Complete unit formatting** - int, float, time (ms), hertz (Hz), dB (with -inf at â‰¤-80dB), percent (%), Pan, Semitone (st), MIDI Note, Custom, Native
- ğŸ‘ï¸ **Focus management** - Visual focus indicators with crosshair corners
- ğŸ”’ **Cursor locking** - Mouse cursor locks during drag operations
- âš¡ **Fine adjustment** - Hold shift for precise 0.02 steps vs normal 0.5 steps
- ğŸ“ **Size constraints** - Fixed 15px height, 25px minimum width (like live.numbox)
- ğŸ¯ **Real-time attribute monitoring** - Live inspector change detection
- âŒ« **Full edit controls** - Backspace, Enter/Escape to commit/cancel edits
- ğŸ”„ **Global mouse tracking** - cursor locking during mouse drag

## ğŸš€ Usage

### Setup
1. Add a **JSUI** object to your Max patch
2. Load `jsui.numbox.js` into the JSUI object
3. **Required for full functionality:**
   - Set up mousestate polling system with `r ---poll`, `mousestate`, `pak 0 0 0`, and `prepend globalMouse`
   - Connect `key` object with `prepend keyInput` for keyboard editing
   - Connect `live.thisdevice` with `prepend active` for device state
   - Connect `s ---poll` to JSUI's right outlet for polling trigger
4. Configure via inspector or messages

### Patch Setup Example
```
[r ---poll] â†’ [mousestate] â†’ [pak 0 0 0] â†’ [prepend globalMouse] â†˜
                                                                    â†˜
[live.thisdevice] â†’ [prepend active] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â†’ [jsui jsui.numbox.js]
                                                                    â†—                    â†“
[key] â†’ [prepend keyInput] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â†—                [s ---poll]
```

### Basic Usage
```javascript
// Control active state and visual feedback
active 1    // Enable output and active colors
active 0    // Disable output, show inactive colors

// Set text justification
@jsarguments left     // Left-aligned text
@jsarguments centre   // Center-aligned text (default)
@jsarguments right    // Right-aligned text
```

### ğŸ® Interaction
- **Click & drag** - Adjust value (shift for fine control)
- **Double-click** - Reset to initial value
- **Type numbers** - Direct keyboard entry with visual cursor (accepts 0-9, decimal point, minus sign)
- **Enter** - Commit edit
- **Escape** - Cancel edit
- **Backspace** - Delete characters while editing

## ğŸ“– Documentation

All JSUI object properties and attributes are documented in [`jsui-object-prop.md`](jsui-object-prop.md), generated from the `getAttrs()` function.

## âš ï¸ Current Limitations

- Uses `_parameter_unitstyle` instead of custom `_parameter_units` strings
- Fixed step size (0.002 fine / 0.5 normal) - `_parameter_steps` not implemented
- Linear scaling only - `_parameter_exponent` not implemented
- No unique ID system for remote addressing
- No automation visualization capabilities
- No accessibility features
- Limited to Live's LCD color scheme

## ğŸ”§ Debugging

Use the `getAttrs()` function to see all available attributes:
```javascript
// Send to the JSUI object:
getAttrs()
```

## ğŸ“„ License

MIT Attribution

## ğŸ‘¨â€ğŸ’» Author

Robert Koster - Fixation Studios  
June 22, 2025

---

*README generated by Claude-4-Sonnet*

### ğŸ“š Additional Resources
- [Max/MSP JSUI Documentation](https://docs.cycling74.com/max8/vignettes/jsui)
- [Complete Attribute Reference](jsui-object-prop.md)
- [Ableton Live Device Integration](https://docs.cycling74.com/max8/vignettes/live_integration)
